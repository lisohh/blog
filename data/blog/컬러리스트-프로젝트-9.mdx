---
title: 'ğŸ‰ ì»¬ëŸ¬ë¦¬ìŠ¤íŠ¸ í”„ë¡œì íŠ¸ #9 api ìš”ì²­ í™•ì¸ '
thumbSrc: '/static/images/colorlist.png'
date: '2022-08-23'
tags: ['project', 'colorlist', 'íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €', 'ë¹Œë“œ ë„êµ¬', 'íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬']
draft: false
summary: 'ë³¸ í¬ìŠ¤íŠ¸ëŠ” ì»¬ëŸ¬ë¦¬ìŠ¤íŠ¸ ì—°ìŠµì„ ìœ„í•œ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ë©° ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.'
images: ['/static/images/colorlist.png']
---

# ğŸ“Œ ëª©ì°¨

![Welcome](/static/images/colorlist.png)

> âœ¨ [ì»¬ëŸ¬ë¦¬ìŠ¤íŠ¸ ì‚¬ì´íŠ¸(ì•„ì§ ì—†ìŒ](https://www.)

ğŸ’ğŸ»

1. TestFormì—ì„œ articleì„ formìœ¼ë¡œ ê°ì‹¸ê¸°
2. Pallete.tsxì—ì„œ button íƒ€ì… buttonìœ¼ë¡œ ì„¤ì •
3. inputì— ì„œë²„ì—ì„œ ì •í•´ì¤€ name, type ì„¤ì •
4. data ì „ì²˜ë¦¬ í”„ë¡œì„¸ì‹±
5. type assumption - global.d.ts
6. api.tsë¥¼ ë§Œë“¤ì–´ postí•¨ìˆ˜ë¥¼ ìº¡ìŠí™”í•˜ê¸°

---

## 1. TestFormì—ì„œ articleì„ `form`ìœ¼ë¡œ ê°ì‹¸ê¸°

TestFormì—ì„œ ì…ë ¥í•˜ëŠ” ê°’ë“¤ì„ í•œë²ˆì— ë³´ë‚´ì£¼ê¸° ìœ„í•´ `form`ìœ¼ë¡œ TestFormì•ˆì˜ ìš”ì†Œë“¤ì„ ê°ì‹¸ì¤ë‹ˆë‹¤.

```tsx
<form
        onSubmit={(event) => {
          event.preventDefault();
          const rawData = new FormData(event.target as HTMLFormElement);

          const colors = rawData.get("colors");
          if (colors !== null) {
            // ì „ì²˜ë¦¬, preprocess
            const data = [
              {
                jubogang: {
                  ju: rawData.get("ju"),
                  bo: rawData.get("bo"),
                  gang: rawData.get("gang"),
                },
                box: JSON.parse(colors as string),
                answer: rawData.get("answer"),
              },
            ];
            saveColors(data as MyColors[]);
          }
        }}
      >
```

## 2. Palleteì—ì„œ buttonì„ ëˆŒë €ì„ë•Œ ë°”ë¡œ ì œì¶œë˜ì§€ ì•Šë„ë¡ typeì„ buttonìœ¼ë¡œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

```tsx
;<Tabs.List aria-label="select pallete type">
  {/* íŒ”ë ˆíŠ¸ì˜ íƒ€ì…ë§ˆë‹¤ Tabs.Triggerë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤*/}
  {palleteTypes.map((value) => (
    <Tabs.Trigger key={value} value={value} className="bg-yellow-200" type="button">
      {value}
    </Tabs.Trigger>
  ))}
</Tabs.List>
{
  /* ["base", "deep"]*/
}
{
  /* íŒ”ë ˆíŠ¸ì˜ íƒ€ì…ë§ˆë‹¤ Tabs.Contentë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤*/
}
{
  palleteTypes.map((value) => (
    <Tabs.Content key={value} value={value}>
      <div id="pallete" className="flex flex-row flex-wrap">
        {/* 4ë²ˆ - palleteë„ ê°’ì´ ì—¬ëŸ¬ ê°œì´ë¯€ë¡œ mapì„ ì‚¬ìš©í•œë‹¤. */}
        {allPallete[value].map(({ hex, colorName }, index) => (
          <Tooltip.Root>
            <Tooltip.Trigger asChild>
              <button
                type="button"
                key={index}
                onClick={() => addSelected(hex)}
                className="roundButton"
                style={{ backgroundColor: hex }}
              >
                {colorName}
              </button>
            </Tooltip.Trigger>
            <Tooltip.Content className="tooltip-content">
              {hex}
              <Tooltip.Arrow className="tooltip-arrow" width="20" height="10" />
            </Tooltip.Content>
          </Tooltip.Root>
        ))}
      </div>
    </Tabs.Content>
  ))
}
```

## 3. ì„œë²„ api ìŠ¤í‚¤ë§ˆì—ì„œ ì •í•´ì¤€ëŒ€ë¡œ TestFormì—ì„œ inputì—ëŠ” type,nameì„ textareaì—ëŠ” nameì„ ë„£ì–´ì¤ë‹ˆë‹¤.

```tsx
<p id="allColor">ì£¼ë³´ê°• ê¸°ì…</p>
        <label className="color-label" htmlFor="main-color">
          ì£¼ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          placeholder="ì£¼ì¡°ìƒ‰:"
          value={mainColor}
          // change eventì˜ targetì¸ textareaì˜ ìƒˆë¡œ ë³€ê²½ëœ ê°’ì„
          // reactì˜ mainColor ìƒíƒœì— ì„¸íŒ…
          // ê°’ì„ ë™ê¸°í™”í•´ì£¼ëŠ” ê±°ì—ìš”.
          // https://beta.reactjs.org/learn/reacting-to-input-with-state
          onChange={(event) => setMainColor(event.target.value)}
        />
        <label className="color-label" htmlFor="sub-color">
          ë³´ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          placeholder="ë³´ì¡°ìƒ‰:"
          value={subColor}
          onChange={(event) => setSubColor(event.target.value)}
        />
        <label className="color-label" htmlFor="point-color">
          ê°•ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          placeholder="ê°•ì¡°ìƒ‰:"
          value={pointColor}
          onChange={(event) => setPointColor(event.target.value)}
        />
        <label className="color-label" htmlFor="explanation" id="explanation">
          ë°°ìƒ‰ ì„¤ëª…
        </label>
        <textarea
          id="explanation"
          placeholder={"ì»¨ì…‰:\nì£¼ì¡°ìƒ‰:\në³´ì¡°ìƒ‰:\nê°•ì¡°ìƒ‰:\në°°ìƒ‰ ê¸°ë²•:"}
          value={explanation}
          onChange={(event) => setExplanation(event.target.value)}
        />
        <p id="allColor">ì£¼ë³´ê°• ê¸°ì…</p>
        <label className="color-label" htmlFor="main-color">
          ì£¼ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          type="text"
          name="ju"
          placeholder="ì£¼ì¡°ìƒ‰:"
          value={mainColor}
          onChange={(event) => setMainColor(event.target.value)}
        />
        <label className="color-label" htmlFor="sub-color">
          ë³´ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          type="text"
          name="bo"
          placeholder="ë³´ì¡°ìƒ‰:"
          value={subColor}
          onChange={(event) => setSubColor(event.target.value)}
        />
        <label className="color-label" htmlFor="point-color">
          ê°•ì¡°ìƒ‰
        </label>
        <input
          id="color-selection"
          type="text"
          name="gang"
          placeholder="ê°•ì¡°ìƒ‰:"
          value={pointColor}
          onChange={(event) => setPointColor(event.target.value)}
        />
        <label className="color-label" htmlFor="explanation" id="explanation">
          ë°°ìƒ‰ ì„¤ëª…
        </label>
        <textarea
          id="explanation"
          name="answer"
          placeholder={"ì»¨ì…‰:\nì£¼ì¡°ìƒ‰:\në³´ì¡°ìƒ‰:\nê°•ì¡°ìƒ‰:\në°°ìƒ‰ ê¸°ë²•:"}
          value={explanation}
          onChange={(event) => setExplanation(event.target.value)}
        />

```

## 4. data ì „ì²˜ë¦¬ í”„ë¡œì„¸ì‹±

FormDataë¥¼ rawDataë¡œ ê°€ì ¸ì™€ì„œ <br/>
ë°±ì—”ë“œ ì„œë²„ì— ê°€ì ¸ê°ˆ í¬ë§·ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬ í”„ë¡œì„¸ì‹±í•´ì„œ dataì— ë„£ì–´ì¤ë‹ˆë‹¤.

```tsx
const rawData = new FormData(event.target as HTMLFormElement)

const colors = rawData.get('colors')
if (colors !== null) {
  // ì „ì²˜ë¦¬, preprocess
  const data = [
    {
      jubogang: {
        ju: rawData.get('ju'),
        bo: rawData.get('bo'),
        gang: rawData.get('gang'),
      },
      box: JSON.parse(colors as string),
      answer: rawData.get('answer'),
    },
  ]
  saveColors(data as MyColors[])
}
```

## 5. type assumption - global.d.ts

formì— ê°€ì ¸ê°ˆ ë°ì´í„° typeë“¤ì€ ì—¬ëŸ¬ íŒŒì¼ì— ì“°ì´ë¯€ë¡œ
`global.d.ts`íŒŒì¼ì— typeì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.

```ts
type MyColors = {
  jubogang: {
    ju: string
    bo: string
    gang: string
  }
  box: Array<{ color: string; width: number }>
  answer: string
}
```

## 6. api.tsë¥¼ ë§Œë“¤ì–´ postí•¨ìˆ˜ë¥¼ ìº¡ìŠí™”í•˜ê¸°

ì„œë²„ì— ë°ì´í„°ë¥¼ ë³´ë‚´ì£¼ê¸°ìœ„í•´ api.tsë¥¼ ë§Œë“­ë‹ˆë‹¤.

ì„œë²„ì—ì„œ ë°›ì„ ì£¼ì†Œë¥¼ Hostë¡œ ì„¤ì •í•©ë‹ˆë‹¤.

```ts
const HOST = 'http://localhost:8000'
```

ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” í•¨ìˆ˜ saveColorsë¥¼ ë§Œë“¤ì–´ `export`í•´ì¤ë‹ˆë‹¤.

```ts
export function saveColors(data: MyColors[]) {
  return post('/colors', data)
}
```

ì—¬ê¸°ì— í¬í•¨ë˜ëŠ” postí•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ì—ë„ ì“°ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë”°ë¡œ ë–¼ì–´ ì¶”ìƒí™”, ìº¡ìŠí™”í•´ì¤ë‹ˆë‹¤.

```ts
function post<T>(path: string, data: T) {
  return fetch(HOST + path, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })
}
```

ì´ë ‡ê²Œ í•¨ìˆ˜ë¥¼ ìº¡ìŠí™”í•´ì¤„ ê²½ìš°

1. ì“°ê¸° ì‰½ë‹¤
2. ë‚˜ì¤‘ì— êµì²´í•˜ê¸° ì‰½ë‹¤
3. ì‹¤ìˆ˜í•˜ê¸° ì–´ë µë‹¤
   ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.
